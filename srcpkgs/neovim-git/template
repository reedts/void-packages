# Template file for 'neovim-git'
pkgname=neovim-git
version=0.5.0
revision=1
build_style=gnu-makefile
build_helper="qemu"
make_build_args="CMAKE_BUILD_TYPE=Release CMAKE_INSTALL_PREFIX=/usr"
hostmakedepends="LuaJIT cmake curl automake gettext git gperf libtool m4 pkg-config unzip"
makedepends="libtermkey-devel libuv-devel libvterm-devel msgpack-devel LuaJIT-devel
 libluv-devel libutf8proc-devel"
depends="libvterm>=0.1.0"
conflicts="neovim"
short_desc="Fork of Vim aiming to improve user experience, plugins and GUIs"
maintainer="reedts <j.reedts@gmail.com>"
license="Apache-2.0, custom:Vim"
homepage="https://neovim.io"

alternatives="
 vi:vi:/usr/bin/nvim
 vi:vi.1:/usr/share/man/man1/nvim.1
 vi:view:/usr/bin/nvim
 vi:view.1:/usr/share/man/man1/nvim.1
 vim:vim:/usr/bin/nvim
 vim:vim.1:/usr/share/man/man1/nvim.1"

pre_fetch() {
	git clone https://github.com/neovim/neovim ${wrksrc}
	cd ${wrksrc}
}

pre_configure() {
	vsed -i runtime/CMakeLists.txt \
		-e "s|\".*/bin/nvim|\${CMAKE_CROSSCOMPILING_EMULATOR} &|g"
}

post_install() {
	vlicense LICENSE
}
